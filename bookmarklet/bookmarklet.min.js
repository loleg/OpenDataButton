(function(){function d(){(window.myBookmarklet=function(){var a=$("#odb-bkmlt-dialog-form");0<a.length?a.fadeIn():($("body").append('     <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.12.0/build/cssreset-context/cssreset-context-min.css">     <div id="odb-bkmlt-dialog-form" class="yui3-cssreset" style="display:none">     <h5>Open this data!</h5><br>     <form><fieldset>     <label for="title">Title</label>        <input type="text" name="title"/><br/>     <label for="context">Context</label>     <select name="context">         <option value="private">Private</option>         <option value="academic">Academic</option>         <option value="commercial">Commercial</option>         <option value="government">Government</option>     </select><br/>     <label for="reason">Reason</label>         <input type="checkbox" checked name="reason" value="legal">Legal</button>         <input type="checkbox" name="reason" value="technical">Technical</button><br/>     <label for="lat">Location</label>         lat <input type="text" name="lat" value="" size="4"/>         lon <input type="text" name="lon" value="" size="4"/>     </fieldset>     <label></label><button class="submit">Submit</button>     </form>     <button style="float:right" class="cancel">Close</button>     </div>     <style type="text/css">     #odb-bkmlt-dialog-form { width:30em; z-index:9999; font-size:16px; position:fixed; top:0px; left:5em; padding:2em; border:1px solid black; box-shadow:5px 5px 10px #888; background: white; }     #odb-bkmlt-dialog-form h5 { font-size:24px; } #odb-bkmlt-dialog-form label { width:6em; display:inline-block; }     #odb-bkmlt-dialog-form button.submit { background: #cfc; margin: 1em 0 0 6em; float: left; }     </style>     '),
a=$("#odb-bkmlt-dialog-form").fadeIn(),$('input[name="title"]',a).val(document.title),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(c){$('input[name="lat"]',a).attr("value",c.coords.latitude);$('input[name="lon"]',a).attr("value",c.coords.longitude)}),$("button.submit",a).click(function(){var b={url:location.href,title:$('input[name="title"]',a).val(),context:$('select[name="context"]',a).val(),reason:$('input[name="reason"]:checked',a).val(),lat:$('input[name="lat"]',a).val(),
lon:$('input[name="lon"]',a).val()};$.post(c+"/submit",b,function(b){var d=$.parseJSON(b);$("form",a).html('Thanks. You can now <a href="'+c+"/#"+d.id+'">see your post</a> and find out about next steps here: <a href="'+c+'">'+c+"</a>\x3c!--"+b+"--\x3e")});return!1}),$("button.cancel",a).click(function(){a.fadeOut().remove()}))})()}var c="http://button.datalets.ch";if(void 0===window.jQuery||"1.10.2">window.jQuery.fn.jquery){var e=!1,b=document.createElement("script");b.src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js";
b.onload=b.onreadystatechange=function(){e||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(e=!0,d())};document.getElementsByTagName("head")[0].appendChild(b)}else d()})();
